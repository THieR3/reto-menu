<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Restaurant - Focus</title>
    <style>
        :root { --orange: #e67e22; --cream: #fdf5e6; }
        body { background: var(--cream); font-family: sans-serif; margin: 0; overflow-x: hidden; }
        
        h1 { text-align: center; margin-top: 30px; color: #5d3412; }

        /* Conteneur de défilement horizontal */
        .menu-slider {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            padding: 50px 0;
            gap: 15px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        .menu-slider::-webkit-scrollbar { display: none; }

        /* Style des cartes réduites */
        .card {
            min-width: 200px; /* Largeur réduite */
            width: 200px;
            height: 300px;
            background: white;
            border-radius: 25px;
            scroll-snap-align: center;
            transition: transform 0.4s ease, opacity 0.4s ease;
            text-decoration: none;
            color: black;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            opacity: 0.6; /* Les cartes sur les côtés sont plus sombres */
            transform: scale(0.8); /* Les cartes sur les côtés sont plus petites */
        }

        /* Quand la carte est au centre (géré par JS) */
        .card.is-active {
            opacity: 1;
            transform: scale(1.1); /* Plus grande au centre */
            z-index: 2;
        }

        .card-img { height: 180px; background: #eee; border-radius: 25px 25px 0 0; }
        .card-info { padding: 15px; text-align: center; }

        /* Espaces vides pour permettre le centrage du premier et dernier élément */
        .spacer { min-width: calc(50vw - 115px); }
    </style>
</head>
<body>
    <h1>Notre Menu</h1>
    <div class="menu-slider" id="slider">
        <div class="spacer"></div>
        </div>

    <script>
        async function loadMenu() {
            const resp = await fetch('menu.json');
            const data = await resp.json();
            const slider = document.getElementById('slider');
            
            const cardsHTML = data.map(item => `
                <a href="detail-plat.html?id=${item.id}" class="card">
                    <div class="card-img"></div>
                    <div class="card-info">
                        <strong>${item.nom}</strong><br>
                        <span style="color:var(--orange)">${item.prix}</span>
                    </div>
                </a>
            `).join('');
            
            slider.innerHTML = `<div class="spacer"></div>` + cardsHTML + `<div class="spacer"></div>`;
            
            // Gestion du focus au défilement
            slider.addEventListener('scroll', () => {
                const cards = document.querySelectorAll('.card');
                const center = slider.scrollLeft + (slider.offsetWidth / 2);
                
                cards.forEach(card => {
                    const cardCenter = card.offsetLeft + (card.offsetWidth / 2);
                    if (Math.abs(center - cardCenter) < 100) {
                        card.classList.add('is-active');
                    } else {
                        card.classList.remove('is-active');
                    }
                });
            });
        }
        loadMenu();
    </script>
</body>
</html>